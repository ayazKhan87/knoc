<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knoc - Find Products Nearby</title>
    
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #fafafa;
            color: #333;
            overflow-x: hidden;
        }

        /* Enhanced Hero Section */
        .hero-section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background: linear-gradient(135deg, #fafafa 0%, rgba(239, 68, 68, 0.05) 100%);
            overflow: hidden;
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 800;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(50px);
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            color: #666;
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0;
            transform: translateY(30px);
        }

        .gradient-text {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Enhanced Search Section */
        .search-section {
            position: relative;
            max-width: 700px;
            margin: 0 auto 3rem;
            opacity: 0;
            transform: translateY(30px);
        }

        .search-container {
            position: relative;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .search-container:focus-within {
            border-color: #ef4444;
            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.2);
            transform: translateY(-2px);
        }

        .search-input {
            width: 100%;
            padding: 20px 60px 20px 24px;
            font-size: 18px;
            font-weight: 500;
            border: none;
            background: transparent;
            outline: none;
            color: #333;
        }

        .search-input::placeholder {
            color: #999;
        }

        .search-icon {
            position: absolute;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            color: #ef4444;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .search-loading {
            position: absolute;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #ef4444;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        .category-indicator {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .category-indicator.active {
            opacity: 1;
            transform: translateX(-50%) translateY(-10px);
        }

        /* Search Suggestions */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            margin-top: 8px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.1);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .search-suggestions.active {
            opacity: 1;
            transform: translateY(0);
        }

        .suggestion-item {
            padding: 16px 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .suggestion-item:hover {
            background: rgba(239, 68, 68, 0.05);
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .suggestion-info {
            flex: 1;
        }

        .suggestion-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .suggestion-desc {
            color: #666;
            font-size: 14px;
        }

        /* Dynamic Background Animations */
        .animation-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .floating-element {
            position: absolute;
            opacity: 0;
            font-size: 24px;
            pointer-events: none;
        }

        .pulse-element {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        .sparkle-element {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ef4444;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        /* Fixed Navbar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            z-index: 1000;
            padding: 16px 0;
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            padding: 12px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 800;
            color: #333;
            text-decoration: none;
        }

        .navbar-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 18px;
        }

        .navbar-button {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .navbar-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
        }

        /* Features Section */
        .features-section {
            padding: 100px 0;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .features-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .features-header {
            text-align: center;
            margin-bottom: 80px;
        }

        .features-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 20px;
            color: #333;
        }

        .features-subtitle {
            font-size: 18px;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border-color: rgba(239, 68, 68, 0.2);
        }

        .feature-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 24px;
            transition: all 0.3s ease;
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .feature-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
        }

        .feature-desc {
            color: #666;
            line-height: 1.6;
        }

        /* CTA Section */
        .cta-section {
            padding: 100px 0;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            text-align: center;
            color: white;
        }

        .cta-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .cta-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 20px;
        }

        .cta-subtitle {
            font-size: 18px;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        .cta-button {
            background: white;
            color: #ef4444;
            border: none;
            padding: 16px 32px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        /* Footer */
        .footer {
            background: #333;
            color: white;
            padding: 60px 0 30px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: #ef4444;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: #ef4444;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #555;
            color: #999;
        }

        /* Background Categories */
        .bg-food {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
        }

        .bg-electronics {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
        }

        .bg-medical {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }

        .bg-fashion {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
        }

        .bg-automotive {
            background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
        }

        .bg-sports {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar-content {
                padding: 0 16px;
            }

            .hero-content {
                padding: 0 16px;
            }

            .search-section {
                margin: 0 16px 2rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .feature-card {
                padding: 24px;
            }

            .features-container,
            .cta-container,
            .footer-container {
                padding: 0 16px;
            }
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fafafa;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #ef4444;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="navbar-content">
            <a href="#" class="navbar-brand">
                <div class="navbar-logo">K</div>
                <span>Knoc</span>
            </a>
            <button class="navbar-button" id="navButton">
                For Shops
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section" id="heroSection">
        <div class="hero-background" id="heroBackground"></div>
        <div class="animation-layer" id="animationLayer"></div>
        
        <div class="hero-content">
            <h1 class="hero-title" id="heroTitle">
                Knoc on <span class="gradient-text">Shop's Doors</span>
            </h1>
            <p class="hero-subtitle" id="heroSubtitle">
                Get what you need instantly by connecting with nearby stores. Just knoc, and find everything you're looking for right in your neighborhood.
            </p>
            
            <div class="search-section" id="searchSection">
                <div class="category-indicator" id="categoryIndicator">
                    Search for anything...
                </div>
                <div class="search-container">
                    <input 
                        type="text" 
                        class="search-input" 
                        id="searchInput"
                        placeholder="Search for shops, products, or services..."
                        autocomplete="off"
                    >
                    <div class="search-icon" id="searchIcon">🔍</div>
                    <div class="search-loading" id="searchLoading" style="display: none;"></div>
                </div>
                <div class="search-suggestions" id="searchSuggestions"></div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section" id="featuresSection">
        <div class="features-container">
            <div class="features-header">
                <h2 class="features-title">How It Works</h2>
                <p class="features-subtitle">
                    Find products from local stores in three simple steps
                </p>
            </div>
            
            <div class="features-grid" id="featuresGrid">
                <div class="feature-card" data-feature="search">
                    <div class="feature-icon">🔍</div>
                    <h3 class="feature-title">Instant Search</h3>
                    <p class="feature-desc">Find any product in nearby stores with a single knoc</p>
                </div>
                
                <div class="feature-card" data-feature="connect">
                    <div class="feature-icon">💬</div>
                    <h3 class="feature-title">Direct Communication</h3>
                    <p class="feature-desc">Chat with store owners and share product images</p>
                </div>
                
                <div class="feature-card" data-feature="location">
                    <div class="feature-icon">📍</div>
                    <h3 class="feature-title">Location Based</h3>
                    <p class="feature-desc">See exactly where products are available nearby</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="cta-container">
            <h2 class="cta-title">Ready to Find?</h2>
            <p class="cta-subtitle">
                Join others discovering products near them instantly
            </p>
            <a href="https://play.google.com/store/apps/details?id=com.knoc.app" class="cta-button" target="_blank">
                Download Now
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Knoc</h3>
                    <p>Connecting neighborhood stores with local customers for instant product discovery.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <a href="#" style="display: block; margin-bottom: 8px;">Home</a>
                    <a href="#" style="display: block; margin-bottom: 8px;">Features</a>
                    <a href="#" style="display: block; margin-bottom: 8px;">Privacy Policy</a>
                </div>
                
                <div class="footer-section">
                    <h3>For You</h3>
                    <a href="https://play.google.com/store/apps/details?id=com.knoc.app" target="_blank" style="display: block; margin-bottom: 8px;">Download App</a>
                    <a href="#" style="display: block; margin-bottom: 8px;">How It Works</a>
                    <a href="#" style="display: block; margin-bottom: 8px;">Register Your Shop</a>
                </div>
                
                <div class="footer-section">
                    <h3>Connect</h3>
                    <a href="https://www.instagram.com/knocfind" target="_blank" style="display: block; margin-bottom: 8px;">Instagram</a>
                    <a href="https://youtube.com/@knoc-knoc" target="_blank" style="display: block; margin-bottom: 8px;">YouTube</a>
                    <a href="mailto:contact@knoc.in" style="display: block; margin-bottom: 8px;">Email</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Knoc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Register GSAP ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        class KnocWebsite {
            constructor() {
                this.searchInput = document.getElementById('searchInput');
                this.searchIcon = document.getElementById('searchIcon');
                this.searchLoading = document.getElementById('searchLoading');
                this.searchSuggestions = document.getElementById('searchSuggestions');
                this.categoryIndicator = document.getElementById('categoryIndicator');
                this.heroBackground = document.getElementById('heroBackground');
                this.animationLayer = document.getElementById('animationLayer');
                this.navbar = document.getElementById('navbar');
                this.navButton = document.getElementById('navButton');
                
                this.currentCategory = 'default';
                this.animations = [];
                this.searchTimeout = null;
                this.showBusiness = false;
                
                this.categories = {
                    food: {
                        keywords: ['food', 'restaurant', 'pizza', 'burger', 'cafe', 'bakery', 'grocery', 'fruits', 'vegetables', 'meat', 'dairy', 'snacks', 'beverages', 'dining', 'kitchen', 'cooking', 'recipe', 'meal', 'lunch', 'dinner', 'breakfast', 'dominos', 'mcdonalds', 'kfc', 'subway', 'starbucks'],
                        name: '🍕 Food & Dining',
                        items: ['🍕', '🍔', '🍟', '🌭', '🥪', '🍜', '🍝', '🍱', '🍙', '🍣', '🥗', '🍰', '🧁', '🍪', '🍩', '☕', '🥤', '🍎', '🥑', '🥕']
                    },
                    electronics: {
                        keywords: ['electronics', 'mobile', 'phone', 'laptop', 'computer', 'tablet', 'tv', 'gadget', 'tech', 'digital', 'smart', 'device', 'camera', 'headphones', 'speaker', 'gaming', 'software', 'hardware', 'iphone', 'android', 'samsung', 'apple', 'sony', 'lg'],
                        name: '📱 Electronics & Tech',
                        items: ['💻', '📱', '⌚', '🖥️', '📺', '🎮', '📷', '🎧', '⌨️', '🖱️', '💾', '🔌', '🔋', '📡', '💡', '🔊', '📻', '⚡', '🛸', '🔬']
                    },
                    medical: {
                        keywords: ['medical', 'pharmacy', 'hospital', 'clinic', 'doctor', 'medicine', 'health', 'wellness', 'drugstore', 'chemist', 'dental', 'healthcare', 'treatment', 'therapy', 'surgery', 'emergency', 'ambulance', 'nurse', 'patient', 'diagnosis', 'apollo', 'medplus'],
                        name: '🏥 Medical & Health',
                        items: ['💊', '💉', '🩺', '🏥', '⚕️', '🚑', '🩹', '🔬', '🧬', '🦠', '🫀', '🧠', '🦷', '👨‍⚕️', '👩‍⚕️', '🌡️', '🧴', '💊', '🩸', '🔬']
                    },
                    fashion: {
                        keywords: ['fashion', 'clothing', 'clothes', 'boutique', 'apparel', 'dress', 'shirt', 'jeans', 'shoes', 'accessories', 'jewelry', 'bag', 'style', 'designer', 'brand', 'outfit', 'wardrobe', 'trendy', 'casual', 'formal', 'footwear', 'handbag', 'zara', 'h&m', 'nike', 'adidas'],
                        name: '👗 Fashion & Style',
                        items: ['👗', '👔', '👕', '👖', '👠', '👜', '💍', '👑', '🕶️', '👒', '🧥', '👘', '👙', '🩱', '🧦', '🧤', '🎩', '👢', '🥿', '👞']
                    },
                    automotive: {
                        keywords: ['automotive', 'car', 'bike', 'motorcycle', 'scooter', 'vehicle', 'auto', 'garage', 'service', 'repair', 'parts', 'fuel', 'petrol', 'diesel', 'mechanic', 'showroom', 'dealer', 'honda', 'toyota', 'maruti', 'hyundai'],
                        name: '🚗 Automotive',
                        items: ['🚗', '🚙', '🚕', '🏎️', '🚓', '🚑', '🚒', '🚐', '🛻', '🚚', '🚛', '🏍️', '🛵', '🚲', '🛞', '⛽', '🔧', '🔩', '🛠️', '🚧']
                    },
                    sports: {
                        keywords: ['sports', 'fitness', 'gym', 'exercise', 'workout', 'athletic', 'sportswear', 'equipment', 'football', 'cricket', 'tennis', 'badminton', 'basketball', 'volleyball', 'swimming', 'running', 'cycling', 'yoga', 'martial', 'boxing'],
                        name: '⚽ Sports & Fitness',
                        items: ['⚽', '🏀', '🏈', '🎾', '🏐', '🏓', '🥊', '🥋', '🏸', '🏒', '🏑', '🥍', '🏹', '🎯', '🤿', '🏊', '🏃', '🚴', '🧘', '🏋️']
                    }
                };
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.initAnimations();
                this.hideLoader();
            }
            
            setupEventListeners() {
                // Search functionality
                this.searchInput.addEventListener('input', (e) => {
                    this.handleSearch(e.target.value);
                });
                
                this.searchInput.addEventListener('focus', () => {
                    this.searchInput.parentElement.style.transform = 'translateY(-2px)';
                });
                
                this.searchInput.addEventListener('blur', () => {
                    this.searchInput.parentElement.style.transform = 'translateY(0)';
                    setTimeout(() => {
                        this.hideSuggestions();
                    }, 200);
                });
                
                // Navbar scroll effect
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        this.navbar.classList.add('scrolled');
                    } else {
                        this.navbar.classList.remove('scrolled');
                    }
                });
                
                // Nav button toggle
                this.navButton.addEventListener('click', () => {
                    this.toggleBusinessMode();
                });
                
                // Feature card hover effects
                document.querySelectorAll('.feature-card').forEach(card => {
                    card.addEventListener('mouseenter', (e) => {
                        this.animateFeatureCard(e.target, true);
                    });
                    
                    card.addEventListener('mouseleave', (e) => {
                        this.animateFeatureCard(e.target, false);
                    });
                });
                
                // Click outside to close suggestions
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.search-section')) {
                        this.hideSuggestions();
                    }
                });
            }
            
            initAnimations() {
                // Hero section entrance animation
                gsap.timeline()
                    .to('#heroTitle', {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        ease: "power3.out"
                    })
                    .to('#heroSubtitle', {
                        opacity: 1,
                        y: 0,
                        duration: 0.8,
                        ease: "power3.out"
                    }, "-=0.5")
                    .to('#searchSection', {
                        opacity: 1,
                        y: 0,
                        duration: 0.8,
                        ease: "power3.out"
                    }, "-=0.3");
                
                // Features section scroll animation
                gsap.fromTo('.feature-card', {
                    opacity: 0,
                    y: 50
                }, {
                    opacity: 1,
                    y: 0,
                    duration: 0.8,
                    stagger: 0.2,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: '#featuresSection',
                        start: 'top 80%',
                        end: 'bottom 20%',
                        toggleActions: 'play none none reverse'
                    }
                });
                
                // Floating elements in hero
                this.createFloatingElements();
            }
            
            createFloatingElements() {
                const elements = ['✨', '🔍', '📱', '🏪', '💫', '🎯'];
                
                elements.forEach((element, index) => {
                    const div = document.createElement('div');
                    div.className = 'floating-element';
                    div.textContent = element;
                    div.style.left = Math.random() * 100 + '%';
                    div.style.top = Math.random() * 100 + '%';
                    div.style.color = 'rgba(239, 68, 68, 0.1)';
                    div.style.fontSize = '20px';
                    
                    this.animationLayer.appendChild(div);
                    
                    gsap.to(div, {
                        opacity: 0.3,
                        y: Math.random() * 100 - 50,
                        x: Math.random() * 100 - 50,
                        rotation: Math.random() * 360,
                        duration: 3 + Math.random() * 2,
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut",
                        delay: index * 0.5
                    });
                });
            }
            
            handleSearch(query) {
                if (this.searchTimeout) {
                    clearTimeout(this.searchTimeout);
                }
                
                const detectedCategory = this.detectCategory(query);
                
                if (detectedCategory !== this.currentCategory) {
                    this.currentCategory = detectedCategory;
                    this.updateBackground(detectedCategory);
                    this.updateCategoryIndicator(detectedCategory);
                }
                
                if (query.length > 2) {
                    this.showLoading(true);
                    this.triggerCategoryAnimation(detectedCategory);
                    
                    this.searchTimeout = setTimeout(() => {
                        this.performSearch(query);
                    }, 300);
                } else {
                    this.hideSuggestions();
                    this.clearCategoryAnimations();
                }
            }
            
            detectCategory(query) {
                const lowerQuery = query.toLowerCase();
                
                for (const [category, config] of Object.entries(this.categories)) {
                    if (config.keywords.some(keyword => lowerQuery.includes(keyword))) {
                        return category;
                    }
                }
                
                return 'default';
            }
            
            updateBackground(category) {
                // Remove existing background classes
                this.heroBackground.className = 'hero-background';
                
                if (category !== 'default') {
                    this.heroBackground.classList.add(`bg-${category}`);
                }
            }
            
            updateCategoryIndicator(category) {
                const indicator = this.categoryIndicator;
                
                if (category === 'default') {
                    indicator.classList.remove('active');
                    indicator.textContent = 'Search for anything...';
                } else {
                    indicator.textContent = this.categories[category].name;
                    indicator.classList.add('active');
                }
            }
            
            triggerCategoryAnimation(category) {
                this.clearCategoryAnimations();
                
                if (category === 'default') return;
                
                switch (category) {
                    case 'food':
                        this.createFoodAnimation();
                        break;
                    case 'electronics':
                        this.createElectronicsAnimation();
                        break;
                    case 'medical':
                        this.createMedicalAnimation();
                        break;
                    case 'fashion':
                        this.createFashionAnimation();
                        break;
                    case 'automotive':
                        this.createAutomotiveAnimation();
                        break;
                    case 'sports':
                        this.createSportsAnimation();
                        break;
                }
            }
            
            createFoodAnimation() {
                const items = this.categories.food.items;
                
                for (let i = 0; i < 12; i++) {
                    const element = document.createElement('div');
                    element.className = 'floating-element food-item';
                    element.textContent = items[Math.floor(Math.random() * items.length)];
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.fontSize = '32px';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, scale: 0, rotation: Math.random() * 360 });
                    gsap.to(element, {
                        opacity: 0.6,
                        scale: 1,
                        rotation: 0,
                        duration: 0.5,
                        delay: i * 0.1,
                        ease: "back.out(1.7)"
                    });
                    
                    gsap.to(element, {
                        y: Math.random() * 60 - 30,
                        x: Math.random() * 60 - 30,
                        rotation: Math.random() * 30 - 15,
                        duration: 2 + Math.random() * 2,
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
            }
            
            createElectronicsAnimation() {
                // Create circuit-like animations
                for (let i = 0; i < 15; i++) {
                    const element = document.createElement('div');
                    element.className = 'pulse-element';
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.background = 'rgba(74, 185, 255, 0.3)';
                    element.style.boxShadow = '0 0 20px rgba(74, 185, 255, 0.5)';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, scale: 0 });
                    gsap.to(element, {
                        opacity: 0.7,
                        scale: 1,
                        duration: 0.3,
                        delay: i * 0.05,
                        ease: "power2.out"
                    });
                    
                    gsap.to(element, {
                        scale: 1.5,
                        opacity: 0.3,
                        duration: 1.5,
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
            }
            
            createMedicalAnimation() {
                // Create medical cross animations
                for (let i = 0; i < 10; i++) {
                    const element = document.createElement('div');
                    element.className = 'floating-element';
                    element.textContent = '⚕️';
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.fontSize = '28px';
                    element.style.color = 'rgba(255, 71, 87, 0.6)';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, scale: 0 });
                    gsap.to(element, {
                        opacity: 0.8,
                        scale: 1,
                        duration: 0.4,
                        delay: i * 0.1,
                        ease: "back.out(1.7)"
                    });
                    
                    gsap.to(element, {
                        scale: 1.2,
                        duration: 1.2,
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
                
                // Heartbeat effect
                this.createHeartbeatEffect();
            }
            
            createFashionAnimation() {
                const items = this.categories.fashion.items;
                
                for (let i = 0; i < 14; i++) {
                    const element = document.createElement('div');
                    element.className = 'floating-element';
                    element.textContent = items[Math.floor(Math.random() * items.length)];
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.fontSize = '30px';
                    element.style.color = 'rgba(255, 107, 157, 0.6)';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, scale: 0, rotation: Math.random() * 360 });
                    gsap.to(element, {
                        opacity: 0.7,
                        scale: 1,
                        rotation: 0,
                        duration: 0.6,
                        delay: i * 0.08,
                        ease: "elastic.out(1, 0.5)"
                    });
                    
                    gsap.to(element, {
                        y: Math.sin(i) * 40,
                        x: Math.cos(i) * 40,
                        rotation: Math.random() * 20 - 10,
                        duration: 3 + Math.random(),
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
                
                this.createSparkleEffect();
            }
            
            createAutomotiveAnimation() {
                const items = this.categories.automotive.items;
                
                for (let i = 0; i < 10; i++) {
                    const element = document.createElement('div');
                    element.className = 'floating-element';
                    element.textContent = items[Math.floor(Math.random() * items.length)];
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.fontSize = '28px';
                    element.style.color = 'rgba(99, 110, 114, 0.6)';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, x: -100 });
                    gsap.to(element, {
                        opacity: 0.7,
                        x: 0,
                        duration: 0.8,
                        delay: i * 0.1,
                        ease: "power2.out"
                    });
                    
                    gsap.to(element, {
                        x: Math.random() * 100 - 50,
                        duration: 2,
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
            }
            
            createSportsAnimation() {
                const items = this.categories.sports.items;
                
                for (let i = 0; i < 12; i++) {
                    const element = document.createElement('div');
                    element.className = 'floating-element';
                    element.textContent = items[Math.floor(Math.random() * items.length)];
                    element.style.left = Math.random() * 100 + '%';
                    element.style.top = Math.random() * 100 + '%';
                    element.style.fontSize = '30px';
                    element.style.color = 'rgba(0, 184, 148, 0.6)';
                    
                    this.animationLayer.appendChild(element);
                    this.animations.push(element);
                    
                    gsap.set(element, { opacity: 0, scale: 0 });
                    gsap.to(element, {
                        opacity: 0.8,
                        scale: 1,
                        duration: 0.4,
                        delay: i * 0.1,
                        ease: "bounce.out"
                    });
                    
                    gsap.to(element, {
                        y: Math.random() * 80 - 40,
                        rotation: Math.random() * 360,
                        duration: 2 + Math.random(),
                        repeat: -1,
                        yoyo: true,
                        ease: "sine.inOut"
                    });
                }
            }
            
            createHeartbeatEffect() {
                const heartbeat = document.createElement('div');
                heartbeat.style.position = 'absolute';
                heartbeat.style.top = '50%';
                heartbeat.style.left = '50%';
                heartbeat.style.width = '150px';
                heartbeat.style.height = '150px';
                heartbeat.style.border = '2px solid rgba(255, 71, 87, 0.3)';
                heartbeat.style.borderRadius = '50%';
                heartbeat.style.transform = 'translate(-50%, -50%)';
                heartbeat.style.pointerEvents = 'none';
                
                this.animationLayer.appendChild(heartbeat);
                this.animations.push(heartbeat);
                
                gsap.to(heartbeat, {
                    scale: 1.3,
                    opacity: 0.5,
                    duration: 0.8,
                    repeat: -1,
                    yoyo: true,
                    ease: "power2.inOut"
                });
            }
            
            createSparkleEffect() {
                for (let i = 0; i < 20; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle-element';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    
                    this.animationLayer.appendChild(sparkle);
                    this.animations.push(sparkle);
                    
                    gsap.to(sparkle, {
                        opacity: 1,
                        scale: 1,
                        duration: 0.5,
                        delay: Math.random() * 2,
                        repeat: -1,
                        yoyo: true,
                        ease: "power2.inOut"
                    });
                }
            }
            
            clearCategoryAnimations() {
                this.animations.forEach(element => {
                    gsap.killTweensOf(element);
                    if (element.parentNode) {
                        element.parentNode.removeChild(element);
                    }
                });
                this.animations = [];
            }
            
            async performSearch(query) {
                try {
                    const response = await fetch(
                        `https://rtwtkapynafirwixyeal.supabase.co/functions/v1/shop-search?q=${encodeURIComponent(query)}`
                    );
                    
                    if (!response.ok) {
                        throw new Error('Search failed');
                    }
                    
                    const data = await response.json();
                    this.showSuggestions(data.shops || []);
                } catch (error) {
                    console.error('Search error:', error);
                    this.showSuggestions([]);
                } finally {
                    this.showLoading(false);
                }
            }
            
            showSuggestions(shops) {
                const suggestions = this.searchSuggestions;
                
                if (shops.length === 0) {
                    this.hideSuggestions();
                    return;
                }
                
                suggestions.innerHTML = '';
                
                shops.slice(0, 5).forEach((shop, index) => {
                    const item = document.createElement('div');
                    item.className = 'suggestion-item';
                    
                    item.innerHTML = `
                        <div class="suggestion-icon">
                            ${shop.name.charAt(0).toUpperCase()}
                        </div>
                        <div class="suggestion-info">
                            <div class="suggestion-name">${shop.name}</div>
                            <div class="suggestion-desc">${shop.description || 'No description available'}</div>
                        </div>
                    `;
                    
                    item.addEventListener('click', () => {
                        window.open(shop.profileUrl, '_blank');
                    });
                    
                    suggestions.appendChild(item);
                    
                    // Animate suggestion appearance
                    gsap.fromTo(item, {
                        opacity: 0,
                        y: 20
                    }, {
                        opacity: 1,
                        y: 0,
                        duration: 0.3,
                        delay: index * 0.05,
                        ease: "power2.out"
                    });
                });
                
                suggestions.classList.add('active');
            }
            
            hideSuggestions() {
                this.searchSuggestions.classList.remove('active');
            }
            
            showLoading(show) {
                if (show) {
                    this.searchIcon.style.display = 'none';
                    this.searchLoading.style.display = 'block';
                } else {
                    this.searchIcon.style.display = 'block';
                    this.searchLoading.style.display = 'none';
                }
            }
            
            toggleBusinessMode() {
                this.showBusiness = !this.showBusiness;
                
                if (this.showBusiness) {
                    this.navButton.textContent = 'For Users';
                    document.getElementById('heroTitle').innerHTML = 
                        'Know What Your <span class="gradient-text">Neighbors Need</span>';
                    document.getElementById('heroSubtitle').textContent = 
                        'Grow your business by instantly connecting with local customers actively searching for your products. Respond to inquiries and turn neighbors into customers.';
                } else {
                    this.navButton.textContent = 'For Shops';
                    document.getElementById('heroTitle').innerHTML = 
                        'Knoc on <span class="gradient-text">Shop\'s Doors</span>';
                    document.getElementById('heroSubtitle').textContent = 
                        'Get what you need instantly by connecting with nearby stores. Just knoc, and find everything you\'re looking for right in your neighborhood.';
                }
            }
            
            animateFeatureCard(card, isHover) {
                const icon = card.querySelector('.feature-icon');
                
                if (isHover) {
                    gsap.to(icon, {
                        scale: 1.1,
                        rotation: 5,
                        duration: 0.3,
                        ease: "back.out(1.7)"
                    });
                } else {
                    gsap.to(icon, {
                        scale: 1,
                        rotation: 0,
                        duration: 0.3,
                        ease: "power2.out"
                    });
                }
            }
            
            hideLoader() {
                setTimeout(() => {
                    const loader = document.getElementById('loadingOverlay');
                    loader.classList.add('hidden');
                }, 1000);
            }
        }
        
        // Initialize the website
        document.addEventListener('DOMContentLoaded', () => {
            new KnocWebsite();
        });
    </script>
</body>
</html>
